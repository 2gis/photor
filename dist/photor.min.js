!function(a){function b(){for(var a in k)if(void 0!==document.createElement("div").style[a])return a;return!1}function c(a,b,c,d){d=!!d,a.addEventListener?a.addEventListener(b,c,d):a.attachEvent?a.attachEvent("on"+b,c):a[b]=c}function d(a,b){var c=" "+a.className+" ";return b=" "+b+" ",c.replace(/[\n\t]/g," ").indexOf(b)>-1?!0:!1}function e(){var a=navigator.pointerEnabled;return a?["pointerdown","pointermove","pointerup","pointerleave"]:["mousedown","mousemove","mouseup","mouseleave"]}function f(a,b,c){var d,e,f;return function(){e=arguments,f=!0,c=c||this,d||!function(){f?(a.apply(c,e),f=!1,d=setTimeout(arguments.callee,b)):d=null}()}}function g(a){function b(a){if(y++,!v.dragging){var b=a.pageX||a.touches[0].pageX,c=a.pageY||a.touches[0].pageY;B={x:b,y:c},C={x:0,y:0},v.dragging=!0,q=this,r=q.offsetWidth,d(q,i.thumbs)&&v.thumbsDragging&&(A=v.thumbsIndent,t=new Date,v.thumbsLayer.css("transition-duration","0s"))}}function e(a){if(v.dragging){var b=a.pageX||touches[0].pageX,c=a.pageY||touches[0].pageY;if(z=z||y>1,"undefined"==typeof s&&(s=!!(s||Math.abs(b-B.x)<Math.abs(c-B.y))),!v.dragging||z||s)return v.dragging=!1,void(d(q,i.control)?j():v.thumbsDragging&&o());a.preventDefault(),C={x:b-B.x,y:c-B.y},d(q,i.control)?h():v.thumbsDragging&&k()}}function g(b){if(0!=y&&y--,"undefined"!=typeof q){var c=Math.abs(C.x)>20||Math.abs(C.y)>20;if(v.dragging&&c&&d(q,i.control)&&j(),v.thumbsDragging&&c&&d(q,i.thumbs)&&o(),!c&&!s){if(d(b.target,i.prev)&&n.prev(a),d(b.target,i.next)&&n.next(a),d(b.target,i.thumbImg)){var e=parseInt(b.target.getAttribute("data-rel"));n.go(a,e),b.stopPropagation()}b.stopPropagation(),b.preventDefault()}s=void 0,z=!!y,v.dragging=!1,q=void 0,B={}}}function h(){v.allowClick=!1;var a,b;a=C.x/r*100,b=100*-v.current+a,v.layer.css(n.setIndent(b))}function j(){C.x>0?v.current+1:v.current-1;Math.abs(C.x)>.05*r?C.x<0?n.next(a):n.prev(a):n.go(a,v.current)}function k(){var a=C.x+A;v.thumbsIndent=a,v.thumbsLayer.css(n.setIndent(a,"px"))}function o(){if(v.thumbsDragging){var a=C.x<0?-1:1;u=new Date,v.thumbsIndent=p(v.thumbsIndent,a),v.thumbsLayer.css("transition-duration",".24s").css(n.setIndent(v.thumbsIndent,"px"))}}function p(a,b){var c,d,e=Math.abs(10*C.x/(u-t));return c=b*parseInt(Math.pow(e,2))+a,d=v.thumbs.outerWidth()-v.thumbsLayer.outerWidth(),c>0?0:d>c?d:c}var q,r,s,t,u,v=l[a],w=v.control[0],x=v.thumbs[0],y=0,z=!1,A=0,B={},C={};v.dragging=!1,v.thumbsIndent=0,c(w,m[0],b,!1),c(w,m[1],f(e,13),!0),c(w,m[2],g,!1),c(w,m[3],g,!1),c(x,m[0],b,!1),c(x,m[1],f(e,13),!0),c(x,m[2],g,!1),c(x,m[3],g,!1);for(var D=0,E=v.thumb.length;E>D;D++)c(v.thumbImg[D],"click",function(a){a.preventDefault()},!1);for(D=0,E=v.thumbImg.length;E>D;D++)c(v.thumbImg[D],"dragstart",function(a){a.preventDefault()},!1)}function h(a){l[a];c(window,"keydown",function(b){var c=b.which||b.keyCode;switch(c){case 32:n.next(a);break;case 37:n.prev(a);break;case 39:n.next(a)}},!1)}if(window){var i,j,k={transform:"transform",OTransform:"-o-transform",msTransform:"-ms-transform",MozTransform:"-moz-transform",WebkitTransform:"-webkit-transform"},l=[],m=e(),n={init:function(c){return i=a.extend({current:0,count:0,loadingRange:2,slideIdPrefix:"_",transform:b()},c),this.each(function(b){var c=a(this),d=this.id||b,e={},f="",g=0,h=[];e.root=c,e.control=c.find("."+i.control),e.next=c.find("."+i.next),e.prev=c.find("."+i.prev),e.thumbs=c.find("."+i.thumbs),e.thumbsLayer=c.find("."+i.thumbsLayer),e.thumb=c.find("."+i.thumb),e.thumbImg=c.find("."+i.thumbImg),e.thumbFrame=c.find("."+i.thumbFrame),e.viewport=c.find("."+i.viewport),e.layer=c.find("."+i.layer),e.gallery=[],e.thumb.each(function(b){var c=a(this),d=c.find("."+i.thumbImg)[0];e.gallery.push({url:this.href,width:0,height:0,loaded:!1}),f+=n.getTemplate(b),g++,a(d).attr("data-rel",b).addClass(i.slideIdPrefix+b),h[b]=d.src}),e.layer.html(f),e.slide=c.find("."+i.slide),e.current=i.current,e.count=g-1,e.dragging=!1,e.thumbsDragging=!1,e.allowClick=!0,e.viewportWidth=e.viewport.outerWidth(),e.viewportHeight=e.viewport.outerHeight(),e.thumbSrc=h,l[d]=e,n.loadThumbs(d),n.handlers(d),n.go(d,e.current,0)})},destroy:function(){a("."+i.next).off(),a("."+i.prev).off(),a("."+i.thumb).off()},handlers:function(b){function c(){new Date-e<j?setTimeout(c,j):(f=!1,d.viewportWidth=d.viewport.outerWidth(),d.viewportHeight=d.viewport.outerHeight(),d.slide.each(function(a){n.position(b,a)}),n.setCurrentThumb(b,d.current,1))}var d=l[b],e=new Date(1,1,2e3,12,0,0),f=!1,j=84;g(b),i.keyboard&&h(b),a(window).on("resize",function(){e=new Date,f===!1&&(f=!0,setTimeout(c,j))})},go:function(a,b,c){var d=l[a];void 0===c&&(c=i.delay),d.layer.css("transition-duration",c+"ms").css(n.setIndent(100*-b)),d.current=b,n.setCurrentThumb(a,b),d.slide.removeClass(i.mod.current),d.slide.filter("."+i.slideIdPrefix+b).addClass(i.mod.current),n.loadSlides(a,b),n.checkButtons(a),clearTimeout(j),j=setTimeout(function(){d.layer.css("transition-duration","0s")},c)},next:function(a){var b=l[a];b.current<b.count?n.go(a,b.current+1):n.go(a,b.current)},prev:function(a){var b=l[a];b.current>0?n.go(a,b.current-1):n.go(a,b.current)},loadSlides:function(a,b){for(var c=l[a],d=(i.loadingRange,0>b-1?0:b-1),e=b+1>c.count?c.count:b+1,f=d;e>=f;f++)c.gallery[f].loaded||n.loadSlide(a,f)},loadSlide:function(b,c){var d=l[b],e=d.root.find("."+i.slide+"."+i.slideIdPrefix+c+" "),f=e.find("."+i.slideImg),g=d.gallery[c].url,h=document.createElement("img");!function(c){var j=a(h);j.on("load",function(){d.gallery[c].loaded=!0,d.gallery[c].width=this.width,d.gallery[c].height=this.height,e.removeClass(i.mod.loading),n.position(b,c)}).on("error",function(){a.error("Image wasn't loaded: "+this.src)}),h.src=g,f.css("background-image","url("+h.src+")")}(c)},loadThumbs:function(b){var c=l[b],d=c.count,e=c.thumbSrc,f=document.createElement("img"),g=0;c.galleryThumbs=[],c.galleryThumbsLoaded=!1;for(var h=0;d>=h;h++)!function(h){var i=a(f);i.on("load",function(){g++,g==d&&(c.galleryThumbsLoaded=!0,n.getThumbsSize(b))}).on("error",function(){a.error("Image wasn't loaded: "+this.src)}),f.src=e[h]}(h)},getThumbsSize:function(b){var c=l[b],d=c.thumb;d.each(function(b){var d=a(this);c.galleryThumbs[b]={},c.galleryThumbs[b].width=d.outerWidth(),c.galleryThumbs[b].height=d.outerHeight(),c.galleryThumbs[b].top=d.position().top+parseInt(d.css("margin-top")),c.galleryThumbs[b].left=d.position().left+parseInt(d.css("margin-left"))}),n.setCurrentThumb(b,c.current,1)},setCurrentThumb:function(a,b,c){function d(a){var b=o-p;return a>0||!g.thumbsDragging?0:b>a?b:a}var e,f,g=l[a],h=g.thumbFrame,j={},m=g.galleryThumbs[b],o=g.thumbs.outerWidth(),p=g.thumbsLayer.outerWidth(),q=c?"0s":".24s";g.thumbsDragging=p>o,g.galleryThumbsLoaded&&(j.width=m.width+"px",j.height=m.height+"px",i.transform?j[k[i.transform]]="translate3d("+m.left+"px, "+m.top+"px, 0)":(j.top=m.top+"px",j.left=m.left+"px"),e=-1*(m.left-.5*(o-m.width)),f=d(e),g.thumbsIndent=f,h.css("transition-duration",q).css(j),g.thumbsLayer.css("transition-duration",q).css(n.setIndent(f,"px")))},position:function(a,b){var c=l[a],d=c.root.find("."+i.slide+"."+i.slideIdPrefix+b),e=c.gallery[b],f=c.viewportWidth/c.viewportHeight,g=e.width/e.height;c.viewportWidth>e.width&&c.viewportHeight>e.height?d.removeClass(i.mod.auto).addClass(i.mod.center):d.removeClass(i.mod.center).addClass(i.mod.auto),g>=f?d.removeClass(i.mod.portrait).addClass(i.mod.landscape):d.removeClass(i.mod.landscape).addClass(i.mod.portrait)},checkButtons:function(a){var b=l[a];0==b.current?b.prev.addClass(i.mod.disabled):b.prev.removeClass(i.mod.disabled),b.current==b.count?b.next.addClass(i.mod.disabled):b.next.removeClass(i.mod.disabled)},setIndent:function(a,b){var c={};return b=b||"%",i.transform?c[k[i.transform]]="translate3d("+a+b+", 0, 0)":c.left=a+"%",c},getTemplate:function(a){return'<div class="'+i.slide+" "+i.slideIdPrefix+a+" "+i.mod.loading+'" data-id="'+a+'"><div class="'+i.slideImg+'"></div></div>'}};a.fn.photor=function(b){return n[b]?n[b].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof b&&b?void a.error("Unknown method: "+b):n.init.apply(this,arguments)}}}(jQuery);