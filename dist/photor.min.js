!function(){function a(){for(var a in k)if(void 0!==document.createElement("div").style[a])return a;return!1}function b(a,b,c,d,e){d=!!d,e?a.removeEventListener?a.removeEventListener(b,c,d):a.detachEvent?a.detachEvent("on"+b,c):a[b]=void 0:a.addEventListener?a.addEventListener(b,c,d):a.attachEvent?a.attachEvent("on"+b,c):a[b]=c}function c(a,b){var c=" "+a.className+" ";return b=" "+b+" ",c.replace(/[\n\t]/g," ").indexOf(b)>-1?!0:!1}function d(){var a=!!("ontouchstart"in window);return a?["touchstart","touchmove","touchend","touchcancel"]:["mousedown","mousemove","mouseup","mouseleave"]}function e(a,b,c,d){3==arguments.length&&"boolean"!=typeof c&&(d=c,c=!1);var e;return function(){var f=arguments;d=d||this,c&&!e&&a.apply(d,f),clearTimeout(e),e=setTimeout(function(){c||a.apply(d,f),e=null},b)}}function f(a){function b(){q.isSlide&&(q.isThumbs?g():e()),q={},i.root.removeClass(j._dragging)}function d(){(0==i.current&&q.shiftX>0||i.current==i.count&&q.shiftX<0)&&(q.shiftX=q.shiftX/3),i.layer.css(o.setIndent(100*(q.shiftX/i.controlWidth-i.current)))}function e(){Math.abs(q.shiftX)>.05*i.controlWidth?q.shiftX<0?o.next(a):o.prev(a):o.go(a,i.current)}function f(){i.thumbsIndent=q.shiftX+q.thumbsStartX,i.thumbsLayer.css(o.setIndent(i.thumbsIndent,"px"))}function g(){if(i.thumbsDragging&&q.isSlide){var a=q.shiftX<0?-1:1;q.t2=new Date,i.thumbsIndent=h(i.thumbsIndent,a),i.thumbsLayer.css("transition-duration",".24s").css(o.setIndent(i.thumbsIndent,"px"))}}function h(a,b){var c,d,e=Math.abs(10*q.shiftX/(q.t2-q.t1));return c=b*parseInt(Math.pow(e,2))+a,d=i.thumbs.outerWidth()-i.thumbsLayer.outerWidth(),c>0?0:d>c?d:c}var i=l[a],k=i.control,p=i.thumbs,q={};n.onStart=function(a){q.x1=a.clientX||a.touches&&a.touches[0].clientX,q.y1=a.clientY||a.touches&&a.touches[0].clientY,q.t1=new Date,q.isPressed=!0,q.isThumbs=c(this,j.thumbs),q.thumbsStartX=i.thumbsIndent,i.root.addClass(j._dragging),i.layer.css("transition-duration","0s"),i.thumbsLayer.css("transition-duration","0s")},n.onMove=function(a){if(q.isPressed){if(q.shiftX=(a.clientX||a.touches&&a.touches[0].clientX)-q.x1,q.shiftY=(a.clientY||a.touches&&a.touches[0].clientY)-q.y1,q.shiftXAbs=Math.abs(q.shiftX),q.shiftYAbs=Math.abs(q.shiftY),q.isMultitouch=q.isMultitouch||(a.touches&&a.touches.length)>1,q.isMultitouch)return void b();q.isSlide||q.isScroll||(q.shiftYAbs>=5&&q.shiftYAbs>q.shiftXAbs&&(q.isScroll=!0),q.shiftXAbs>=5&&q.shiftXAbs>q.shiftYAbs&&(q.isSlide=!0)),q.isSlide&&(a.preventDefault(),q.isThumbs?i.thumbsDragging&&f():d())}},n.onEnd=function(d){q.isSlide||q.isScroll||!q.isPressed||(c(d.target,j.prev)&&o.prev(a),c(d.target,j.next)&&o.next(a),c(d.target,j.thumbImg)&&o.go(a,parseInt(d.target.getAttribute("data-rel"))),d.stopPropagation(),d.preventDefault()),b()},i.events.push({element:k[0],event:m[0],handler:n.onStart},{element:k[0],event:m[1],handler:n.onMove,capture:!0},{element:k[0],event:m[2],handler:n.onEnd},{element:k[0],event:m[3],handler:n.onEnd},{element:p[0],event:m[0],handler:n.onStart},{element:p[0],event:m[1],handler:n.onMove,capture:!0},{element:p[0],event:m[2],handler:n.onEnd},{element:p[0],event:m[3],handler:n.onEnd});for(var r=0;r<i.thumb.length;r++)i.events.push({element:i.thumb[r],event:"click",handler:function(a){a.preventDefault()}});for(var s=0;s<i.thumbImg.length;s++)i.events.push({element:i.thumbImg[s],event:"dragstart",handler:function(a){a.preventDefault()}})}function g(){n.resize||(n.resize=e(o.update,84),p.events.push({element:window,event:"resize",handler:n.resize}))}function h(a){var b=l[a];n.keydown=function(b){var c=b.which||b.keyCode;switch(c){case 32:o.next(a);break;case 37:o.prev(a);break;case 39:o.next(a)}},b.events.push({element:window,event:"keydown",handler:n.keydown})}function i(a){var b=l[a];n.transitionEnd=function(){b.layer.css("transition-duration","0s");for(var a=0;a<b.count;a++){var c=b.root.find("."+j.slide+"."+j.slideIdPrefix+a);a<b.current-1||a>b.current+1?c.addClass("_hidden"):c.removeClass("_hidden")}},b.events.push({element:window,event:"transitionEnd",handler:n.transitionEnd})}if(window){var j,k={transform:"transform",OTransform:"-o-transform",msTransform:"-ms-transform",MozTransform:"-moz-transform",WebkitTransform:"-webkit-transform"},l=[],m=d(),n=[],o={init:function(b){return j=$.extend({control:"photor__viewportControl",next:"photor__viewportControlNext",prev:"photor__viewportControlPrev",thumbs:"photor__thumbs",thumbsLayer:"photor__thumbsWrap",thumb:"photor__thumbsWrapItem",thumbImg:"photor__thumbsWrapItemImg",thumbFrame:"photor__thumbsWrapFrame",viewport:"photor__viewport",layer:"photor__viewportLayer",slide:"photor__viewportLayerSlide",slideImg:"photor__viewportLayerSlideImg",_loading:"_loading",_current:"_current",_dragging:"_dragging",_disabled:"_disabled",_alt:"_alt",_auto:"_auto",_center:"_center",_portrait:"_portrait",_landscape:"_landscape",_draggable:"_draggable",current:0,count:0,loadingRange:1,slideIdPrefix:"_",delay:300,keyboard:!0,transform:a()},b),this.each(function(a){var b=$(this),c=this.id||a,d={},e="",f=0,g=[];d.root=b,d.control=b.find("."+j.control),d.next=b.find("."+j.next),d.prev=b.find("."+j.prev),d.thumbs=b.find("."+j.thumbs),d.thumbsLayer=b.find("."+j.thumbsLayer),d.thumb=b.find("."+j.thumb),d.thumbImg=b.find("."+j.thumbImg),d.thumbFrame=b.find("."+j.thumbFrame),d.viewport=b.find("."+j.viewport),d.layer=b.find("."+j.layer),d.gallery=[],d.thumb.each(function(a){var b=$(this),c=b.find("."+j.thumbImg)[0];d.gallery.push({url:this.href,width:0,height:0,loaded:!1,alt:c.alt}),e+=o.getTemplate(a),f++,$(c).attr("data-rel",a).addClass(j.slideIdPrefix+a),g[a]=c.src}),d.layer.html(e),d.slide=b.find("."+j.slide),d.slide.each(function(a){$(this).css("left",100*a+"%")}),d.current=j.current,d.count=f-1,d.thumbsDragging=!1,d.thumbsIndent=0,d.events=[],d.viewportWidth=d.viewport.outerWidth(),d.viewportHeight=d.viewport.outerHeight(),d.controlWidth=d.control.outerWidth(),d.controlHeight=d.control.outerHeight(),d.thumbsWidth=d.thumbs.outerWidth(),d.thumbsHeight=d.thumbs.outerHeight(),d.thumbSrc=g,l[c]=d,b.attr("data-photor-id",c),o.loadThumbs(c),o.handlers(c),o.go(c,d.current,0)})},update:function(){function a(a){c.viewportWidth=c.viewport.outerWidth(),c.viewportHeight=c.viewport.outerHeight(),c.controlWidth=c.control.outerWidth(),c.controlHeight=c.control.outerHeight(),c.thumbsWidth=c.thumbs.outerWidth(),c.thumbsHeight=c.thumbs.outerHeight(),c.slide.each(function(b){o.position(a,b)}),o.setCurrentThumb(a,c.current,1)}console.log("resize");for(var b in l){var c=l[b];a(b)}},destroy:function(a){function c(a){for(var c=l[a],d=0,e=c.events.length;e>d;d++)b(c.events[d].element,c.events[d].event,c.events[d].handler,c.events[d].capture,1)}if("undefined"!=typeof a)c(a);else for(var d in l)c(d)},handlers:function(a){var c=l[a];g(),f(a),i(a),j.keyboard&&h(a);for(var d=0,e=c.events.length;e>d;d++)b(c.events[d].element,c.events[d].event,c.events[d].handler,c.events[d].capture)},go:function(a,b,c){var d=l[a];void 0===c&&(c=j.delay),d.layer.css("transition-duration",c+"ms").css(o.setIndent(100*-b)),d.current=b,o.setCurrentThumb(a,b),d.slide.removeClass(j._current),d.slide.filter("."+j.slideIdPrefix+b).addClass(j._current),o.loadSlides(a,b),o.checkButtons(a)},next:function(a){var b=l[a];b.current<b.count?o.go(a,b.current+1):o.go(a,b.current)},prev:function(a){var b=l[a];b.current>0?o.go(a,b.current-1):o.go(a,b.current)},loadSlides:function(a,b){for(var c=l[a],d=(j.loadingRange,0>b-1?0:b-1),e=b+1>c.count?c.count:b+1,f=d;e>=f;f++)c.gallery[f].loaded||o.loadSlide(a,f)},loadSlide:function(a,b){var c=l[a],d=c.root.find("."+j.slide+"."+j.slideIdPrefix+b),e=d.find("."+j.slideImg),f=c.gallery[b].alt,g=c.gallery[b].url,h=document.createElement("img");!function(b){var i=$(h);i.on("load",function(){c.gallery[b].loaded=!0,c.gallery[b].width=this.width,c.gallery[b].height=this.height,d.removeClass(j._loading),o.position(a,b)}).on("error",function(){$.error("Image wasn't loaded: "+this.src)}),h.src=g,e.css("background-image","url("+h.src+")"),f&&e.addClass(j._alt).attr("data-alt",f)}(b)},loadThumbs:function(a){var b=l[a],c=b.count,d=b.thumbSrc,e=document.createElement("img"),f=0;b.galleryThumbs=[],b.galleryThumbsLoaded=!1;for(var g=0;c>=g;g++)!function(g){var h=$(e);h.on("load",function(){f++,f==c&&(b.galleryThumbsLoaded=!0,o.getThumbsSize(a))}).on("error",function(){$.error("Image wasn't loaded: "+this.src)}),e.src=d[g]}(g)},getThumbsSize:function(a){var b=l[a],c=b.thumb;c.each(function(a){var c=$(this);b.galleryThumbs[a]={},b.galleryThumbs[a].width=c.outerWidth(),b.galleryThumbs[a].height=c.outerHeight(),b.galleryThumbs[a].top=c.position().top+parseInt(c.css("margin-top")),b.galleryThumbs[a].left=c.position().left+parseInt(c.css("margin-left"))}),o.setCurrentThumb(a,b.current,1)},setCurrentThumb:function(a,b,c){function d(a){var b=n-p;return a>0||!g.thumbsDragging?0:b>a?b:a}var e,f,g=l[a],h=g.thumbFrame,i={},m=g.galleryThumbs[b],n=g.thumbs.outerWidth(),p=g.thumbsLayer.outerWidth(),q=c?"0s":".24s";g.thumbsDragging=p>n,g.galleryThumbsLoaded&&(i.width=m.width+"px",i.height=m.height+"px",j.transform?i[k[j.transform]]="translate3d("+m.left+"px, "+m.top+"px, 0)":(i.top=m.top+"px",i.left=m.left+"px"),e=-1*(m.left-.5*(n-m.width)),f=d(e),g.thumbsIndent=f,h.css("transition-duration",q).css(i),g.thumbsLayer.css("transition-duration",q).css(o.setIndent(f,"px")))},position:function(a,b){var c=l[a],d=c.root.find("."+j.slide+"."+j.slideIdPrefix+b),e=c.gallery[b],f=c.viewportWidth/c.viewportHeight,g=e.width/e.height;c.viewportWidth>e.width&&c.viewportHeight>e.height?d.removeClass(j._auto).addClass(j._center):d.removeClass(j._center).addClass(j._auto),g>=f?d.removeClass(j._portrait).addClass(j._landscape):d.removeClass(j._landscape).addClass(j._portrait)},checkButtons:function(a){var b=l[a];0==b.current?b.prev.addClass(j._disabled):b.prev.removeClass(j._disabled),b.current==b.count?b.next.addClass(j._disabled):b.next.removeClass(j._disabled)},setIndent:function(a,b){var c={};return b=b||"%",j.transform?c[k[j.transform]]="translate3d("+a+b+", 0, 0)":c.left=a+"%",c},getTemplate:function(a){return'<div class="'+j.slide+" "+j.slideIdPrefix+a+" "+j._loading+'" data-id="'+a+'"><div class="'+j.slideImg+'"></div></div>'}};$.fn.photor=function(a){return o[a]?o[a].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof a&&a?void $.error("Unknown method: "+a):o.init.apply(this,arguments)}}}(jQuery);