!function(a){function b(){var a=navigator.userAgent.toLowerCase();return a.indexOf("msie")>-1?parseInt(a.split("msie")[1]):!1}function c(){var a=!1,b=document.createElement("p");for(var c in q)if(q.hasOwnProperty(c)&&void 0!==b.style[c]){a={property:c};break}return document.body.appendChild(b),a.property&&(b.style[a.property]="translate3d(1px,1px,1px)",a.has3d="none"!=window.getComputedStyle(b).getPropertyValue(q[a.property])),document.body.removeChild(b),a}function d(a){var b=document.createElement("p").style,c=["ms","O","Moz","Webkit"];if(""==b[a])return a;a=a.charAt(0).toUpperCase()+a.slice(1);for(var d=0,e=c.length;e>d;d++)if(""==b[c[d]+a])return c[d]+a}function e(b,c,d,e,f){e=!!e,b&&(f?b.removeEventListener?b.removeEventListener(c,d,e):a(b).off(c):b.addEventListener?b.addEventListener(c,d,e):a(b).on(c,d))}function f(a,b){var c=" "+a.className+" ";return b=" "+b+" ",c.replace(/[\r\n\t\f]+/g," ").indexOf(b)>-1?!0:!1}function g(){var a="ontouchstart"in window;return a?["touchstart","touchmove","touchend","touchcancel"]:["mousedown","mousemove","mouseup","mouseleave"]}function h(a){function b(a){var b,c=r[a];if(c.params.transform){var d=c.layer.css(q[c.params.transform.property]).match(/(-?[0-9\.]+)/g);b=d.length>6?d[13]:d[4]}else b=c.layer.css("left");return parseInt(b)}function c(){l.params.autoplay&&k(),n.isSlide&&(n.isThumbs?h():l.params.transition&&e()),n={},l.root.removeClass(l.params._dragging)}function d(){var b,c=l.params.slidesOnScreen;(0==l.current&&n.shiftX>0||l.current+c-1==l.last&&n.shiftX<0)&&(n.shiftX=n.shiftX/3),b=n.shiftX+n.startShift,l.layer.css(u.setIndent(a,Math.round(b),"px"))}function e(){if(Math.abs(n.shiftX)>.05*l.viewportWidth){var b,c=n.shiftX/l.viewportWidth*l.params.slidesOnScreen;b=n.shiftX<0?l.current-Math.floor(c):l.current-Math.ceil(c),0>b&&(b=0),b+l.params.slidesOnScreen-1>l.last&&(b=l.last-l.params.slidesOnScreen+1),u.go(a,b)}else u.go(a,l.current)}function g(){var b=n.shiftX+n.thumbsStartX,c=-1*(l.thumbsLayerWidth-l.thumbsWidth);b>0&&(b/=3),c>b&&(b=c+(b-c)/3),l.thumbsIndent=b,l.thumbsLayer.css(u.setIndent(a,l.thumbsIndent,"px"))}function h(){if(l.thumbsDragging&&n.isSlide){var b=n.shiftX<0?-1:1;n.t2=new Date,l.thumbsIndent=i(l.thumbsIndent,b),l.thumbsLayer.css("transition-duration",".24s").css(u.setIndent(a,l.thumbsIndent,"px"))}}function i(a,b){var c,d,e=Math.abs(10*n.shiftX/(n.t2-n.t1));return c=b*parseInt(Math.pow(e,2))+a,d=l.thumbs.outerWidth()-l.thumbsLayer.outerWidth(),c>0?0:d>c?d:c}function j(){(!l.timerPause||l.timerPause<l.timerStart)&&(l.timerPause=Math.round((new Date).getTime()),l.timerDisabled=!0,clearTimeout(l.timer))}function k(){l.timerDisabled=!1}var l=r[a],m=(l.control,l.thumbs),n={};t.onStart=function(a){l.freeze||(n.x1=a.clientX||a.touches&&a.touches[0].clientX,n.y1=a.clientY||a.touches&&a.touches[0].clientY,n.t1=new Date,n.isPressed=!0,n.isThumbs=f(this,l.params.thumbs),n.thumbsStartX=l.thumbsIndent,l.layer.css("transition-duration","0s"),l.thumbsLayer.css("transition-duration","0s"))},t.onMove=function(e){if(n.isPressed&&!l.freeze){if(n.shiftX=(e.clientX||e.touches&&e.touches[0].clientX)-n.x1,n.shiftY=(e.clientY||e.touches&&e.touches[0].clientY)-n.y1,n.shiftXAbs=Math.abs(n.shiftX),n.shiftYAbs=Math.abs(n.shiftY),n.isMultitouch=n.isMultitouch||!!e.touches&&e.touches.length>1,n.isMultitouch)return void c();n.isSlide||n.isScroll||(n.shiftYAbs>=5&&n.shiftYAbs>n.shiftXAbs&&(n.isScroll=!0),n.shiftXAbs>=5&&n.shiftXAbs>n.shiftYAbs&&(l.params.autoplay&&l.timer&&j(),l.root.addClass(l.params._dragging),n.isSlide=!0,n.startShift=b(a))),n.isSlide&&(n.isThumbs?l.thumbsDragging&&g():l.params.transition&&d(),e.preventDefault&&e.preventDefault())}},t.onEnd=function(b){if(!n.isSlide&&!n.isScroll&&n.isPressed){if(f(b.target,l.params.prev)&&u.prev(a),f(b.target,l.params.next)&&u.next(a),f(b.target,l.params.thumbImg)||f(b.target,l.params.thumb)){var d=parseInt(b.target.getAttribute("data-rel"));d+l.params.slidesOnScreen-1>l.last&&(d=l.last-l.params.slidesOnScreen+1),u.go(a,d)}b.stopPropagation&&b.preventDefault&&(b.stopPropagation(),b.preventDefault())}c()},l.events.push({element:l.viewport[0],event:s[0],handler:t.onStart},{element:l.viewport[0],event:s[1],handler:t.onMove,capture:!0},{element:l.viewport[0],event:s[2],handler:t.onEnd},{element:l.viewport[0],event:s[3],handler:t.onEnd},{element:m[0],event:s[0],handler:t.onStart},{element:m[0],event:s[1],handler:t.onMove,capture:!0},{element:m[0],event:s[2],handler:t.onEnd},{element:m[0],event:s[3],handler:t.onEnd}),l.params.autoplay&&l.params.stopAutoplayOnHover&&l.events.push({element:l.viewport[0],event:"mouseenter",handler:j},{element:l.viewport[0],event:"mouseleave",handler:k});for(var o=0,p=l.thumb.length;p>o;o++)l.events.push({element:l.thumb[o],event:"click",handler:function(a){return a.preventDefault&&a.preventDefault(),!1}});for(var v=0,w=l.thumbImg.length;w>v;v++)l.events.push({element:l.thumbImg[v],event:"dragstart",handler:function(a){return a.preventDefault&&a.preventDefault(),!1}})}function i(a){if(!t.resize){var b=r[a];b.events.push({element:window,event:"resize",handler:u.update})}}function j(a){var b=r[a];t.keydown=function(b){var c=b.which||b.keyCode,d=b.target.nodeName.toLowerCase(),e=!!b.target.attributes.contenteditable;if("input"!=d&&"textarea"!=d&&"select"!=d&&!e)switch(c){case 32:u.next(a);break;case 37:u.prev(a);break;case 39:u.next(a)}},b.events.push({element:window,event:"keydown",handler:t.keydown})}function k(a){var b=r[a],c=["webkitTransitionEnd","MSTransitionEnd","oTransitionEnd","transitionend"];t.transitionEnd=function(b){var c=b.propertyName;(c.lastIndexOf("transform")==c.length-"transform".length||"left"==c)&&m(a)};for(var d=0,e=c.length;e>d;d++)b.events.push({element:b.layer[0],event:c[d],handler:t.transitionEnd})}function l(a){var b=r[a];b.params.onTransitionStart&&b.params.onTransitionStart(b)}function m(a){var b=r[a];b.root.removeClass(b.params._animated),b.layer[0].style.transitionDuration=0,n(a,b.current),b.params.onTransitionEnd&&b.params.onTransitionEnd(b)}function n(a,b){for(var c=r[a],d=0,e=c.count;e>d;d++){var f=c.root.find("."+c.params.slide+"."+c.params.modifierPrefix+d),g=c.params.slidesOnScreen;d>=c.current-g&&d<=c.current+2*g-1||d>=b-g&&b+2*g-1>=d?f.removeClass(c.params._hidden):f.addClass(c.params._hidden)}}function o(a,b){var c=new Image;c.onload=c.onerror=function(d){c.onload=c.onerror=null,b("load"==d.type,a)},c.src=a}if("undefined"!=typeof window){var p,q={transform:"transform",WebkitTransform:"-webkit-transform",MozTransform:"-moz-transform",msTransform:"-ms-transform",OTransform:"-o-transform"},r=[],s=g(),t=[],u={init:function(e){var f="photor__";return p=a.extend({control:f+"viewportControl",next:f+"viewportControlNext",prev:f+"viewportControlPrev",thumbs:f+"thumbs",thumbsLayer:f+"thumbsWrap",thumb:f+"thumbsWrapItem",thumbImg:f+"thumbsWrapItemImg",thumbFrame:f+"thumbsWrapFrame",viewport:f+"viewport",layer:f+"viewportLayer",slide:f+"viewportLayerSlide",slideImg:f+"viewportLayerSlideImg",_loading:"_loading",_error:"_error",_current:"_current",_dragging:"_dragging",_disabled:"_disabled",_alt:"_alt",_single:"_single",_animated:"_animated",_hidden:"_hidden",_html:"_html",_freeze:"_freeze",_auto:"_auto",_center:"_center",_portrait:"_portrait",_landscape:"_landscape",_draggable:"_draggable",single:!1,current:0,count:0,last:-1,delay:300,loop:!1,showThumbs:"thumbs",keyboard:!0,modifierPrefix:"_",ieClassPrefix:"_ie",slidesOnScreen:1,autoplay:!1,stopAutoplayOnHover:!1,transform:c(),transition:d("transition"),ie:b()},e),this.each(function(){var b=a(this),c=this.id||r.length,d={},e={},f={url:"",thumb:"",caption:"",width:0,height:0,loaded:!1,classes:""},g=!1;if(!b.attr("data-photor-id")){if(d.params=a.extend({},p),d.root=b,d.control=b.find("."+d.params.control),d.next=b.find("."+d.params.next),d.prev=b.find("."+d.params.prev),d.thumbs=b.find("."+d.params.thumbs),d.thumbsLayer=b.find("."+d.params.thumbsLayer),d.viewport=b.find("."+d.params.viewport),d.layer=b.find("."+d.params.layer),d.gallery=[],d.params.data&&d.params.data.length)for(var h=0,i=d.params.data.length;i>h;h++)d.gallery.push(a.extend({},f,d.params.data[h]));else{var j=b.find("."+d.params.layer+" > *");j.length&&j.each(function(){var b="IMG"==this.nodeName;b?d.gallery.push(a.extend({},f,{url:this.src,caption:this.alt,thumb:a(this).data("thumb"),classes:this.className})):(g=!0,d.gallery.push(a.extend({},f,{html:this.outerHTML,loaded:!0})))})}g&&"thumbs"==d.params.showThumbs&&(d.params.showThumbs="dots"),1!=d.params.slidesOnScreen&&(d.params.showThumbs=null),e=u.getHTML(d.params,d.gallery),d.layer.html(e.slides),d.thumbsLayer.html(e.thumbs),d.thumb=b.find("."+d.params.thumb),d.thumbImg=b.find("."+d.params.thumbImg),d.thumbFrame=b.find("."+d.params.thumbFrame),d.slide=b.find("."+d.params.slide),d.slideImg=b.find("."+d.params.slideImg),d.slide.each(function(b){a(this).css("left",100*b+"%")}),d.current=d.params.current,d.count=d.gallery.length,d.last=d.count-1,d.thumbsDragging=!1,d.thumbsIndent=0,d.events=[],d.viewportWidth=window.getComputedStyle?parseFloat(window.getComputedStyle(d.viewport[0]).width):d.viewport.outerWidth(),d.viewportHeight=d.viewport.outerHeight(),d.controlWidth=d.control.outerWidth(),d.controlHeight=d.control.outerHeight(),d.thumbsWidth=d.thumbs.outerWidth(),d.thumbsHeight=d.thumbs.outerHeight(),r[c]=d,b.attr("data-photor-id",c),d.params.showThumbs&&b.addClass(d.params.modifierPrefix+d.params.showThumbs),d.params.ie&&b.addClass(d.params.ieClassPrefix+d.params.ie),1==d.gallery.length&&b.addClass(d.params._single),"thumbs"==d.params.showThumbs&&u.loadThumbs(c),(d.gallery.length>1||d.params.single)&&u.handlers(c),u.go(c,d.current,0),m(c)}})},update:function(){function a(a){var b=r[a];b.viewportWidth=window.getComputedStyle?parseFloat(window.getComputedStyle(b.viewport[0]).width):b.viewport.outerWidth(),b.viewportHeight=b.viewport.outerHeight(),b.controlWidth=b.control.outerWidth(),b.controlHeight=b.control.outerHeight(),b.thumbsWidth=b.thumbs.outerWidth(),b.thumbsHeight=b.thumbs.outerHeight(),b.thumbsLayerWidth=b.thumbsLayer.outerWidth(),b.slide.each(function(b){u.position(a,b)}),"thumbs"==b.params.showThumbs&&u.getThumbsSize(a),b.layer.css("transition-duration","0s").css(u.setIndent(a,-100*b.current))}for(var b in r)r.hasOwnProperty(b)&&a(b)},destroy:function(a){function b(a){for(var b=r[a],c=0,d=b.events.length;d>c;c++)e(b.events[c].element,b.events[c].event,b.events[c].handler,b.events[c].capture,1)}if("undefined"!=typeof a)b(a);else for(var c in r)r.hasOwnProperty(c)&&b(c)},handlers:function(a){var b=r[a];h(a),i(a),k(a),b.params.keyboard&&j(a);for(var c=0,d=b.events.length;d>c;c++)e(b.events[c].element,b.events[c].event,b.events[c].handler,b.events[c].capture)},go:function(a,b,c){var d=r[a];d.freeze||(d.params.autoplay&&!d.timerDisabled&&u.autoplay(a),l(a),n(a,b),c=null==c?d.params.delay:c,d.root.addClass(d.params._animated),d.layer.css("transition-duration",c+"ms").css(u.setIndent(a,-b*(d.viewportWidth/d.params.slidesOnScreen),"px")),d.current=b,u.loadSlides(a,b),u.checkButtons(a),u.setCurrentThumb(a,b),d.slide.removeClass(d.params._current),d.slide.filter("."+d.params.modifierPrefix+b).addClass(d.params._current),d.params.transition||m(a))},next:function(a){var b=r[a];b.current+b.params.slidesOnScreen-1<b.last?u.go(a,b.current+1):u.go(a,b.params.loop?0:b.current)},prev:function(a){var b=r[a];b.current>0?u.go(a,b.current-1):u.go(a,b.params.loop?b.last:0)},loadSlides:function(a,b){for(var c=r[a],d=c.params.slidesOnScreen,e=0>b-d?0:b-d,f=b+2*d-1>c.last?c.last:b+2*d-1,g=e;f>=g;g++)c.gallery[g]&&!c.gallery[g].loaded&&u.loadSlide(a,g)},loadSlide:function(b,c){var d=r[b],e=d.root.find("."+d.params.slide+"."+d.params.modifierPrefix+c),f=e.find("."+d.params.slideImg),g=d.gallery[c].caption;o(d.gallery[c].url,function(g,h){g?(d.gallery[c].loaded=!0,d.gallery[c].width=this.width,d.gallery[c].height=this.height,u.position(b,c),e.removeClass(d.params._loading),d.params.ie&&d.params.ie<9?f.attr("src",h):f.css("background-image","url("+h+")")):(e.removeClass(d.params._loading),e.addClass(d.params._error),a.error("Image wasn't loaded: "+h))}),g&&f.addClass(d.params._alt).attr("data-alt",g)},loadThumbs:function(b){var c=r[b],d=c.count,e=c.gallery,f=0;c.galleryThumbs=[],c.galleryThumbsLoaded=!1;for(var g=0;d>g;g++)o(e[g].thumb,function(e,g){e?(f++,f==d&&(c.galleryThumbsLoaded=!0,u.getThumbsSize(b))):a.error("Image wasn't loaded: "+g)})},getThumbsSize:function(b){var c=r[b],d=c.thumb;d.each(function(b){var d=a(this);c.galleryThumbs[b]={},c.galleryThumbs[b].width=d.outerWidth(),c.galleryThumbs[b].height=d.outerHeight(),c.galleryThumbs[b].top=d.position().top+parseInt(d.css("margin-top")),c.galleryThumbs[b].left=d.position().left+parseInt(d.css("margin-left"))}),c.thumbsLayerWidth=c.thumbsLayer.outerWidth(),u.setCurrentThumb(b,c.current,1)},setCurrentThumb:function(a,b,c){function d(a){if(a>0||!e.thumbsDragging)return 0;var b=k-l;return b>a?b:a}var e=r[a];if("thumbs"==e.params.showThumbs){var f,g,h=e.thumbFrame,i={},j=e.galleryThumbs&&e.galleryThumbs[b],k=e.thumbs.outerWidth(),l=e.thumbsLayer.outerWidth(),m=c?"0s":.8*e.params.delay/1e3+"s";if(e.thumbsDragging=l>k,e.galleryThumbsLoaded){if(i.width=j.width+"px",i.height=j.height+"px",e.params.transform){var n=q[e.params.transform.property];i[n]=e.params.transform.has3d?"translate3d("+j.left+"px, "+j.top+"px, 0)":"translateX("+j.left+"px) translateY("+j.top+"px)"}else i.top=j.top+"px",i.left=j.left+"px";f=.5*(k-j.width)-j.left,g=d(f),e.thumbsIndent=g,h.css("transition-duration",m).css(i),e.thumbsLayer.css("transition-duration",m).css(u.setIndent(a,g,"px"))}}e.thumb.removeClass(e.params._current),e.thumb.filter("."+e.params.modifierPrefix+b).addClass(e.params._current)},position:function(a,b){var c=r[a],d=c.root.find("."+c.params.slide+"."+c.params.modifierPrefix+b),e=c.gallery[b],f=c.viewportWidth/c.viewportHeight,g=e.width/e.height;c.viewportWidth>e.width&&c.viewportHeight>e.height?(c.gallery[b].algorithm="center",d.removeClass(c.params._auto).addClass(c.params._center)):(c.gallery[b].algorithm="auto",d.removeClass(c.params._center).addClass(c.params._auto)),g>=f?(c.gallery[b].orientation="landscape",d.removeClass(c.params._portrait).addClass(c.params._landscape)):(c.gallery[b].orientation="portrait",d.removeClass(c.params._landscape).addClass(c.params._portrait))},checkButtons:function(a){var b=r[a];0==b.current?b.prev.addClass(b.params._disabled):b.prev.removeClass(b.params._disabled),b.current+b.params.slidesOnScreen-1==b.last?b.next.addClass(b.params._disabled):b.next.removeClass(b.params._disabled)},setIndent:function(a,b,c){var d=r[a],e={};if(c=c||"%",d.params.transform){var f=q[d.params.transform.property];e[f]=d.params.transform.has3d?"translate3d("+b+c+", 0, 0)":"translateX("+b+c+")"}else e.left=b+c;return e},freeze:function(a){var b=r[a];b.freeze=!0,b.root.addClass(b.params._freeze)},unfreeze:function(a){var b=r[a];b.freeze=!1,b.root.removeClass(b.params._freeze)},getHTML:function(a,b){for(var c="",d="",e=0,f=b.length;f>e;e++)c+='<span data-rel="'+e+'" class="'+a.thumb+" "+a.modifierPrefix+e+" "+b[e].classes+'">',"thumbs"==a.showThumbs&&b[e].url&&(c+='<img src="'+b[e].thumb+'" class="'+a.thumbImg+'" data-rel="'+e+'">'),c+="</span>",d+='<div class="'+a.slide+" "+a.modifierPrefix+e+" "+(b[e].html?a._html:a._loading)+'" data-id="'+e+'">',d+=b[e].html?b[e].html:a.ie&&a.ie<9?'<img src="" class="'+a.slideImg+" "+b[e].classes+'" />':'<div class="'+a.slideImg+" "+b[e].classes+'"></div>',d+="</div>";return"thumbs"==a.showThumbs&&(c+='<div class="'+a.thumbFrame+'"></div>'),{thumbs:c,slides:d}},autoplay:function(a){var b=r[a],c=b.params.autoplay;b.timerPause&&(c=b.params.autoplay+b.timerStart-b.timerPause),clearTimeout(b.timer),b.timer=setTimeout(function(){u.next(a)},c),b.timerStart=Math.round((new Date).getTime()),b.timerPause=void 0}};a.fn.photor=function(b){return u[b]?u[b].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof b&&b?void a.error("Unknown method: "+b):u.init.apply(this,arguments)},a.fn.photor.data=r}}(jQuery);